<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1700">
  <!-- 背景色 -->
  <rect width="1200" height="1700" fill="#ffffff" />
  
  <!-- タイトル -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">AIエージェントオーケストラ - UMLアクティビティ図（修正版）</text>
  
  <!-- スイムレーン定義 -->
  <rect x="50" y="70" width="150" height="1580" fill="#f9f9f9" stroke="#666666" stroke-width="1" />
  <rect x="200" y="70" width="200" height="1580" fill="#f5f5f5" stroke="#666666" stroke-width="1" />
  <rect x="400" y="70" width="150" height="1580" fill="#f9f9f9" stroke="#666666" stroke-width="1" />
  <rect x="550" y="70" width="150" height="1580" fill="#f5f5f5" stroke="#666666" stroke-width="1" />
  <rect x="700" y="70" width="150" height="1580" fill="#f9f9f9" stroke="#666666" stroke-width="1" />
  <rect x="850" y="70" width="150" height="1580" fill="#f5f5f5" stroke="#666666" stroke-width="1" />
  <rect x="1000" y="70" width="150" height="1580" fill="#f9f9f9" stroke="#666666" stroke-width="1" />
  
  <!-- スイムレーンのラベル -->
  <text x="125" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">ユーザー</text>
  <text x="300" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-P</text>
  <text x="475" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-A</text>
  <text x="625" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-B</text>
  <text x="775" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-T</text>
  <text x="925" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-D</text>
  <text x="1075" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">AI-Q</text>
  
  <!-- 開始ノード -->
  <circle cx="125" cy="130" r="10" fill="#000000" />
  
  <!-- 1. タスク受付フェーズ -->
  <!-- ユーザーがタスクを指示 -->
  <rect x="75" y="160" width="100" height="40" rx="10" ry="10" fill="#ffffcc" stroke="#999900" stroke-width="1.5" />
  <text x="125" y="183" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">タスク指示</text>
  
  <!-- 開始から「タスク指示」への矢印 -->
  <line x1="125" y1="140" x2="125" y2="160" stroke="#000000" stroke-width="1.5" />
  <polygon points="125,160 121,152 129,152" fill="#000000" />
  
  <!-- AI-Pがタスクを受け取る -->
  <rect x="250" y="160" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="176" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">タスク受付</text>
  <text x="300" y="190" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">基本情報記録</text>
  
  <!-- タスク指示からタスク受付への矢印 -->
  <line x1="175" y1="180" x2="250" y2="180" stroke="#000000" stroke-width="1.5" />
  <polygon points="250,180 242,176 242,184" fill="#000000" />
  
  <!-- 2. 分析・計画フェーズ -->
  <!-- AI-PがAI-Aに分析を依頼 -->
  <rect x="250" y="230" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="253" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">分析依頼</text>
  
  <!-- タスク受付から分析依頼への矢印 -->
  <line x1="300" y1="200" x2="300" y2="230" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,230 296,222 304,222" fill="#000000" />
  
  <!-- AI-Aがタスク分析 -->
  <rect x="425" y="230" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="475" y="246" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">タスク分析</text>
  <text x="475" y="260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">要件抽出</text>
  
  <!-- 分析依頼からタスク分析への矢印 -->
  <line x1="350" y1="250" x2="425" y2="250" stroke="#000000" stroke-width="1.5" />
  <polygon points="425,250 417,246 417,254" fill="#000000" />
  
  <!-- AI-Aが技術選定 -->
  <rect x="425" y="300" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="475" y="316" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">技術スタック</text>
  <text x="475" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">選定</text>
  
  <!-- タスク分析から技術選定への矢印 -->
  <line x1="475" y1="270" x2="475" y2="300" stroke="#000000" stroke-width="1.5" />
  <polygon points="475,300 471,292 479,292" fill="#000000" />
  
  <!-- AI-Aが分析結果を返却 -->
  <rect x="425" y="370" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="475" y="393" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">分析結果返却</text>
  
  <!-- 技術選定から分析結果返却への矢印 -->
  <line x1="475" y1="340" x2="475" y2="370" stroke="#000000" stroke-width="1.5" />
  <polygon points="475,370 471,362 479,362" fill="#000000" />
  
  <!-- AI-Pが分析結果を受け取る -->
  <rect x="250" y="370" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="393" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">分析結果受取</text>
  
  <!-- 分析結果返却から分析結果受取への矢印 -->
  <line x1="425" y1="390" x2="350" y2="390" stroke="#000000" stroke-width="1.5" />
  <polygon points="350,390 358,386 358,394" fill="#000000" />
  
  <!-- 3. イシュー作成フェーズ -->
  <!-- AI-PがGitHubイシューを作成 -->
  <rect x="250" y="440" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="456" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親GitHub</text>
  <text x="300" y="470" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">イシュー作成</text>
  
  <!-- 分析結果受取からイシュー作成への矢印 -->
  <line x1="300" y1="410" x2="300" y2="440" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,440 296,432 304,432" fill="#000000" />
  
  <!-- 4. 環境準備フェーズ -->
  <!-- AI-PがAI-Bにディレクトリ作成を依頼 -->
  <rect x="250" y="510" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="526" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">ディレクトリ</text>
  <text x="300" y="540" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">作成依頼</text>
  
  <!-- イシュー作成からディレクトリ作成依頼への矢印 -->
  <line x1="300" y1="480" x2="300" y2="510" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,510 296,502 304,502" fill="#000000" />
  
  <!-- AI-Bがイシュー内容を読み取る -->
  <rect x="575" y="510" width="100" height="40" rx="10" ry="10" fill="#ffeecc" stroke="#cc6600" stroke-width="1.5" />
  <text x="625" y="526" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシュー</text>
  <text x="625" y="540" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">内容確認</text>
  
  <!-- ディレクトリ作成依頼からイシュー内容確認への矢印 -->
  <line x1="350" y1="530" x2="575" y2="530" stroke="#000000" stroke-width="1.5" />
  <polygon points="575,530 567,526 567,534" fill="#000000" />
  
  <!-- AI-Bがプロジェクト構造を設計・作成 -->
  <rect x="575" y="580" width="100" height="40" rx="10" ry="10" fill="#ffeecc" stroke="#cc6600" stroke-width="1.5" />
  <text x="625" y="596" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">プロジェクト</text>
  <text x="625" y="610" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">構造作成</text>
  
  <!-- イシュー内容確認からプロジェクト構造作成への矢印 -->
  <line x1="625" y1="550" x2="625" y2="580" stroke="#000000" stroke-width="1.5" />
  <polygon points="625,580 621,572 629,572" fill="#000000" />
  
  <!-- AI-BがGitHubイシューに完了通知 -->
  <rect x="575" y="650" width="100" height="40" rx="10" ry="10" fill="#ffeecc" stroke="#cc6600" stroke-width="1.5" />
  <text x="625" y="666" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシューに</text>
  <text x="625" y="680" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">完了通知</text>
  
  <!-- プロジェクト構造作成から完了通知コメントへの矢印 -->
  <line x1="625" y1="620" x2="625" y2="650" stroke="#000000" stroke-width="1.5" />
  <polygon points="625,650 621,642 629,642" fill="#000000" />
  
  <!-- AI-Pが通知を監視 -->
  <rect x="250" y="650" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="666" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシュー監視</text>
  <text x="300" y="680" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">環境準備完了検知</text>
  
  <!-- 完了通知からイシュー監視への矢印 -->
  <line x1="575" y1="670" x2="350" y2="670" stroke="#000000" stroke-width="1.5" />
  <polygon points="350,670 358,666 358,674" fill="#000000" />
  
  <!-- 5. 実装フェーズ -->
  <!-- 並列処理の分岐点（フォーク） -->
  <rect x="275" y="720" width="50" height="5" fill="#000000" />
  
  <!-- イシュー監視から並列処理分岐点への矢印 -->
  <line x1="300" y1="690" x2="300" y2="720" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,720 296,712 304,712" fill="#000000" />
  
  <!-- 5-A. テスト実装 -->
  <!-- AI-Tがイシュー内容とプロジェクト構造を確認 -->
  <rect x="725" y="750" width="100" height="40" rx="10" ry="10" fill="#e6f9ff" stroke="#0099cc" stroke-width="1.5" />
  <text x="775" y="766" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシュー内容</text>
  <text x="775" y="780" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">確認</text>
  
  <!-- 並列処理分岐点からAI-Tイシュー内容確認への矢印 -->
  <line x1="300" y1="725" x2="300" y2="735" stroke="#000000" stroke-width="1.5" />
  <line x1="300" y1="735" x2="775" y2="735" stroke="#000000" stroke-width="1.5" />
  <line x1="775" y1="735" x2="775" y2="750" stroke="#000000" stroke-width="1.5" />
  <polygon points="775,750 771,742 779,742" fill="#000000" />
  
  <!-- AI-Tがテストコードを実装 -->
  <rect x="725" y="820" width="100" height="40" rx="10" ry="10" fill="#e6f9ff" stroke="#0099cc" stroke-width="1.5" />
  <text x="775" y="843" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">テスト実装</text>
  
  <!-- イシュー内容確認からテスト実装への矢印 -->
  <line x1="775" y1="790" x2="775" y2="820" stroke="#000000" stroke-width="1.5" />
  <polygon points="775,820 771,812 779,812" fill="#000000" />
  
  <!-- AI-TがGitHubイシューに完了通知 -->
  <rect x="725" y="890" width="100" height="40" rx="10" ry="10" fill="#e6f9ff" stroke="#0099cc" stroke-width="1.5" />
  <text x="775" y="906" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシューに</text>
  <text x="775" y="920" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">テスト完了通知</text>
  
  <!-- テスト実装からテスト完了通知への矢印 -->
  <line x1="775" y1="860" x2="775" y2="890" stroke="#000000" stroke-width="1.5" />
  <polygon points="775,890 771,882 779,882" fill="#000000" />
  
  <!-- 5-B. 機能実装 -->
  <!-- AI-Dがイシュー内容とプロジェクト構造を確認 -->
  <rect x="875" y="750" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="925" y="766" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシュー内容</text>
  <text x="925" y="780" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">確認</text>
  
  <!-- 並列処理分岐点からAI-Dイシュー内容確認への矢印 -->
  <line x1="300" y1="725" x2="300" y2="735" stroke="#000000" stroke-width="1.5" />
  <line x1="300" y1="735" x2="925" y2="735" stroke="#000000" stroke-width="1.5" />
  <line x1="925" y1="735" x2="925" y2="750" stroke="#000000" stroke-width="1.5" />
  <polygon points="925,750 921,742 929,742" fill="#000000" />
  
  <!-- AI-Dが機能コードを実装 -->
  <rect x="875" y="820" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="925" y="843" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">機能実装</text>
  
  <!-- イシュー内容確認から機能実装への矢印 -->
  <line x1="925" y1="790" x2="925" y2="820" stroke="#000000" stroke-width="1.5" />
  <polygon points="925,820 921,812 929,812" fill="#000000" />
  
  <!-- AI-DがGitHubイシューに完了通知 -->
  <rect x="875" y="890" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="925" y="906" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシューに</text>
  <text x="925" y="920" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">機能完了通知</text>
  
  <!-- 機能実装から機能実装完了通知への矢印 -->
  <line x1="925" y1="860" x2="925" y2="890" stroke="#000000" stroke-width="1.5" />
  <polygon points="925,890 921,882 929,882" fill="#000000" />
  
  <!-- 6. 品質保証・レビューフェーズ -->
  <!-- AI-Pが完了通知を監視 -->
  <rect x="250" y="960" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="976" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシュー監視</text>
  <text x="300" y="990" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">実装完了検知</text>
  
  <!-- テスト完了通知とイシュー監視への矢印 -->
  <line x1="775" y1="930" x2="775" y2="945" stroke="#000000" stroke-width="1.5" />
  <line x1="775" y1="945" x2="300" y2="945" stroke="#000000" stroke-width="1.5" />
  <line x1="300" y1="945" x2="300" y2="960" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,960 296,952 304,952" fill="#000000" />
  
  <!-- 機能完了通知とイシュー監視への矢印 -->
  <line x1="925" y1="930" x2="925" y2="945" stroke="#000000" stroke-width="1.5" />
  <line x1="925" y1="945" x2="300" y2="945" stroke="#000000" stroke-width="1.5" />
  <!-- この矢印は上のテスト完了通知からの矢印と合流するため、矢印の終端は不要 -->
  
  <!-- AI-Pが改善要求回数カウンターを初期化 -->
  <rect x="250" y="1030" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1046" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善要求回数</text>
  <text x="300" y="1060" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">カウンター初期化</text>
  
  <!-- イシュー監視からカウンター初期化への矢印 -->
  <line x1="300" y1="1000" x2="300" y2="1030" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1030 296,1022 304,1022" fill="#000000" />
  
  <!-- AI-PがAI-Qを呼び出す -->
  <rect x="250" y="1100" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1123" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">品質チェック依頼</text>
  
  <!-- カウンター初期化から品質チェック依頼への矢印 -->
  <line x1="300" y1="1070" x2="300" y2="1100" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1100 296,1092 304,1092" fill="#000000" />
  
  <!-- AI-Qがテストと実装内容を検証 -->
  <rect x="1025" y="1100" width="100" height="40" rx="10" ry="10" fill="#f9e6ff" stroke="#9900cc" stroke-width="1.5" />
  <text x="1075" y="1116" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">テスト・実装</text>
  <text x="1075" y="1130" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">内容検証</text>
  
  <!-- 品質チェック依頼からテスト・実装内容検証への矢印 -->
  <line x1="350" y1="1120" x2="1025" y2="1120" stroke="#000000" stroke-width="1.5" />
  <polygon points="1025,1120 1017,1116 1017,1124" fill="#000000" />
  
  <!-- 品質基準を満たしたか判断（決定ノード） -->
  <polygon points="1075,1170 1090,1185 1075,1200 1060,1185" fill="#ffffff" stroke="#000000" stroke-width="1.5" />
  
  <!-- テスト・実装内容検証から決定ノードへの矢印 -->
  <line x1="1075" y1="1140" x2="1075" y2="1170" stroke="#000000" stroke-width="1.5" />
  <polygon points="1075,1170 1071,1162 1079,1162" fill="#000000" />
  
  <!-- 6-A. 改善が必要な場合 -->
  <!-- AI-QがGitHubイシューに改善要求をコメント -->
  <rect x="1025" y="1230" width="100" height="40" rx="10" ry="10" fill="#f9e6ff" stroke="#9900cc" stroke-width="1.5" />
  <text x="1075" y="1246" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">親イシューに</text>
  <text x="1075" y="1260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善要求コメント</text>
  
  <!-- 決定ノードから改善要求コメントへの矢印（No） -->
  <line x1="1060" y1="1185" x2="1015" y2="1185" stroke="#000000" stroke-width="1.5" />
  <line x1="1015" y1="1185" x2="1015" y2="1230" stroke="#000000" stroke-width="1.5" />
  <line x1="1015" y1="1230" x2="1025" y2="1230" stroke="#000000" stroke-width="1.5" />
  <polygon points="1025,1230 1017,1226 1017,1234" fill="#000000" />
  <text x="1015" y="1203" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">No</text>
  
  <!-- AI-Pが改善要求を検知 -->
  <rect x="250" y="1230" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1246" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善要求</text>
  <text x="300" y="1260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">検知</text>
  
  <!-- 改善要求コメントから改善要求検知への矢印 -->
  <line x1="1025" y1="1250" x2="350" y2="1250" stroke="#000000" stroke-width="1.5" />
  <polygon points="350,1250 358,1246 358,1254" fill="#000000" />
  
  <!-- AI-Pが改善要求回数をカウントアップ -->
  <rect x="250" y="1300" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1316" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善要求回数</text>
  <text x="300" y="1330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">カウントアップ</text>
  
  <!-- 改善要求検知からカウントアップへの矢印 -->
  <line x1="300" y1="1270" x2="300" y2="1300" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1300 296,1292 304,1292" fill="#000000" />
  
  <!-- 3回以上かチェック（決定ノード） -->
  <polygon points="300,1370 315,1385 300,1400 285,1385" fill="#ffffff" stroke="#000000" stroke-width="1.5" />
  
  <!-- カウントアップから決定ノードへの矢印 -->
  <line x1="300" y1="1340" x2="300" y2="1370" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1370 296,1362 304,1362" fill="#000000" />
  
  <!-- 6-B. 品質基準を満たした場合（または3回以上） -->
  <!-- AI-QがGitHubイシューに品質承認をコメント -->
  <rect x="1025" y="1590" width="100" height="40" rx="10" ry="10" fill="#f9e6ff" stroke="#9900cc" stroke-width="1.5" />
  <text x="1075" y="1606" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">品質承認</text>
  <text x="1075" y="1620" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">コメント</text>
  
  <!-- 決定ノード（品質チェック）から品質承認コメントへの矢印（Yes） -->
  <line x1="1090" y1="1185" x2="1150" y2="1185" stroke="#000000" stroke-width="1.5" />
  <line x1="1150" y1="1185" x2="1150" y2="1595" stroke="#000000" stroke-width="1.5" />
  <line x1="1150" y1="1595" x2="1125" y2="1595" stroke="#000000" stroke-width="1.5" />
  <polygon points="1125,1595 1133,1591 1133,1599" fill="#000000" />
  <text x="1125" y="1203" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">Yes</text>
  
  <!-- 決定ノード（3回以上）から品質承認コメントへの矢印（Yes） -->
  <line x1="315" y1="1385" x2="1175" y2="1385" stroke="#000000" stroke-width="1.5" />
  <line x1="1175" y1="1385" x2="1175" y2="1610" stroke="#000000" stroke-width="1.5" />
  <line x1="1175" y1="1610" x2="1125" y2="1610" stroke="#000000" stroke-width="1.5" />
  <polygon points="1125,1610 1133,1606 1133,1614" fill="#000000" />
  <text x="330" y="1375" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">Yes（3回以上）</text>
  
  <!-- AI-Pが子イシューを作成 -->
  <rect x="250" y="1430" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1446" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">子イシュー</text>
  <text x="300" y="1460" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">作成</text>
  
  <!-- 決定ノード（3回以上）から子イシュー作成への矢印（No） -->
  <line x1="285" y1="1385" x2="260" y2="1385" stroke="#000000" stroke-width="1.5" />
  <line x1="260" y1="1385" x2="260" y2="1430" stroke="#000000" stroke-width="1.5" />
  <line x1="260" y1="1430" x2="250" y2="1430" stroke="#000000" stroke-width="1.5" />
  <polygon points="250,1430 258,1426 258,1434" fill="#000000" />
  <text x="250" y="1403" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">No（3回未満）</text>
  
  <!-- 改善項目の判断（決定ノード） -->
  <polygon points="300,1500 315,1515 300,1530 285,1515" fill="#ffffff" stroke="#000000" stroke-width="1.5" />
  
  <!-- 子イシュー作成から改善項目の判断への矢印 -->
  <line x1="300" y1="1470" x2="300" y2="1500" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1500 296,1492 304,1492" fill="#000000" />
  
  <!-- 改善項目の分岐: テスト改善のみ -->
  <line x1="285" y1="1515" x2="200" y2="1515" stroke="#000000" stroke-width="1.5" />
  <text x="250" y="1505" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">テスト改善のみ</text>
  
  <!-- 改善項目の分岐: 機能改善のみ -->
  <line x1="315" y1="1515" x2="400" y2="1515" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="1505" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">機能改善のみ</text>
  
  <!-- 改善項目の分岐: 両方改善 -->
  <line x1="300" y1="1530" x2="300" y2="1560" stroke="#000000" stroke-width="1.5" />
  <text x="330" y="1545" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">両方改善</text>
  
  <!-- 並列処理の分岐点（フォーク）- 両方改善の場合 -->
  <rect x="275" y="1560" width="50" height="5" fill="#000000" />
  
  <!-- テスト改善が必要なケース - AI-T -->
  <rect x="725" y="1500" width="100" height="40" rx="10" ry="10" fill="#e6f9ff" stroke="#0099cc" stroke-width="1.5" />
  <text x="775" y="1523" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">テスト改善</text>
  
  <!-- テスト改善のみの矢印 -->
  <line x1="200" y1="1515" x2="200" y2="1520" stroke="#000000" stroke-width="1.5" />
  <line x1="200" y1="1520" x2="725" y2="1520" stroke="#000000" stroke-width="1.5" />
  <polygon points="725,1520 717,1516 717,1524" fill="#000000" />
  
  <!-- 機能改善が必要なケース - AI-D -->
  <rect x="875" y="1500" width="100" height="40" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="925" y="1523" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">機能改善</text>
  
  <!-- 機能改善のみの矢印 -->
  <line x1="400" y1="1515" x2="400" y2="1520" stroke="#000000" stroke-width="1.5" />
  <line x1="400" y1="1520" x2="875" y2="1520" stroke="#000000" stroke-width="1.5" />
  <polygon points="875,1520 867,1516 867,1524" fill="#000000" />
  
  <!-- 両方改善の場合 - AI-T -->
  <line x1="300" y1="1565" x2="300" y2="1575" stroke="#000000" stroke-width="1.5" />
  <line x1="300" y1="1575" x2="775" y2="1575" stroke="#000000" stroke-width="1.5" />
  <line x1="775" y1="1575" x2="775" y2="1540" stroke="#000000" stroke-width="1.5" />
  <polygon points="775,1540 771,1548 779,1548" fill="#000000" />
  
  <!-- 両方改善の場合 - AI-D -->
  <line x1="300" y1="1565" x2="300" y2="1575" stroke="#000000" stroke-width="1.5" />
  <line x1="300" y1="1575" x2="925" y2="1575" stroke="#000000" stroke-width="1.5" />
  <line x1="925" y1="1575" x2="925" y2="1540" stroke="#000000" stroke-width="1.5" />
  <polygon points="925,1540 921,1548 929,1548" fill="#000000" />
  
  <!-- 並列処理の結合点（ジョイン） -->
  <rect x="825" y="1600" width="50" height="5" fill="#000000" />
  
  <!-- テスト改善から結合点への矢印 -->
  <line x1="775" y1="1540" x2="775" y2="1570" stroke="#000000" stroke-width="1.5" />
  <line x1="775" y1="1570" x2="850" y2="1570" stroke="#000000" stroke-width="1.5" />
  <line x1="850" y1="1570" x2="850" y2="1600" stroke="#000000" stroke-width="1.5" />
  <polygon points="850,1600 846,1592 854,1592" fill="#000000" />
  
  <!-- 機能改善から結合点への矢印 -->
  <line x1="925" y1="1540" x2="925" y2="1570" stroke="#000000" stroke-width="1.5" />
  <line x1="925" y1="1570" x2="850" y2="1570" stroke="#000000" stroke-width="1.5" />
  <!-- この矢印は上のテスト改善からの矢印と合流するため、矢印の終端は不要 -->
  
  <!-- 改善完了通知 -->
  <rect x="800" y="1630" width="100" height="30" rx="10" ry="10" fill="#e6ffe6" stroke="#009900" stroke-width="1.5" />
  <text x="850" y="1650" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善完了通知</text>
  
  <!-- 結合点から改善完了通知への矢印 -->
  <line x1="850" y1="1605" x2="850" y2="1630" stroke="#000000" stroke-width="1.5" />
  <polygon points="850,1630 846,1622 854,1622" fill="#000000" />
  
  <!-- AI-Pが改善完了を検知 -->
  <rect x="250" y="1630" width="100" height="30" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1650" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善完了検知</text>
  
  <!-- 改善完了通知からAI-Pの改善完了検知への矢印 -->
  <line x1="800" y1="1645" x2="350" y2="1645" stroke="#000000" stroke-width="1.5" />
  <polygon points="350,1645 358,1641 358,1649" fill="#000000" />
  
  <!-- 7. 完了フェーズ -->
  <!-- AI-QがPull Requestを作成 -->
  <rect x="1025" y="1650" width="100" height="40" rx="10" ry="10" fill="#f9e6ff" stroke="#9900cc" stroke-width="1.5" />
  <text x="1075" y="1673" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Pull Request作成</text>
  
  <!-- 品質承認コメントからPull Request作成への矢印 -->
  <line x1="1075" y1="1630" x2="1075" y2="1650" stroke="#000000" stroke-width="1.5" />
  <polygon points="1075,1650 1071,1642 1079,1642" fill="#000000" />
  
  <!-- AI-Pが完了処理 -->
  <rect x="250" y="1650" width="100" height="40" rx="10" ry="10" fill="#e6f2ff" stroke="#0066cc" stroke-width="1.5" />
  <text x="300" y="1666" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">PR検知・マージ</text>
  <text x="300" y="1680" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">タスク完了</text>
  
  <!-- Pull Request作成からPR検知・マージへの矢印 -->
  <line x1="1025" y1="1670" x2="350" y2="1670" stroke="#000000" stroke-width="1.5" />
  <polygon points="350,1670 358,1666 358,1674" fill="#000000" />
  
  <!-- 終了ノード -->
  <circle cx="300" cy="1720" r="10" fill="#ffffff" stroke="#000000" stroke-width="2" />
  <circle cx="300" cy="1720" r="6" fill="#000000" />
  
  <!-- PR検知・マージから終了ノードへの矢印 -->
  <line x1="300" y1="1690" x2="300" y2="1710" stroke="#000000" stroke-width="1.5" />
  <polygon points="300,1710 296,1702 304,1702" fill="#000000" />
  
  <!-- 改善プロセスのループを示す破線矢印 -->
  <line x1="300" y1="1660" x2="300" y2="1680" stroke="#999900" stroke-width="0" />
  <line x1="200" y1="1645" x2="200" y2="1120" stroke="#999900" stroke-width="1.5" stroke-dasharray="5,5" />
  <line x1="200" y1="1120" x2="250" y2="1120" stroke="#999900" stroke-width="1.5" stroke-dasharray="5,5" />
  <polygon points="250,1120 242,1116 242,1124" fill="#999900" />
  <text x="170" y="1380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666666" transform="rotate(-90 170,1380)">改善プロセスのループ</text>
  
  <!-- UMLの注釈 -->
  <rect x="500" y="1400" width="300" height="70" rx="5" ry="5" fill="#ffffcc" stroke="#999900" stroke-width="1" />
  <text x="650" y="1420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">改善項目の判断</text>
  <text x="650" y="1440" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">AI-Pが必要な改善内容に応じて</text>
  <text x="650" y="1460" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">適切なエージェントに割り当て（並列処理可能）</text>
</svg>
